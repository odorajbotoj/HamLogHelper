# HamLogHelper

HamLogHelper

by BG4QBF

## 页面说明

+ 左侧
  + 上半部分为已经记录的日志. 提交新日志时会自动滚动到底端
  + 下半部分为正在输入的日志. "锁定" 可以保持当前信息提交时不改变
+ 右侧
  + 上半部分为地图, 可以查看已通联的友台 QTH (基于天地图)
  + 下半部分为搜索框, 可以根据模板搜索呼号或根据字典搜索模式 / 设备 / 天线 / 功率, 以及根据字典和天地图 API 搜索 QTH , 点击地点会将信息填入相应栏

## 使用说明

1. 在可执行文件同级目录下创建 `tianditu-key.txt` , 填入天地图 api-key
2. 根据个人需要创建模板与字典
3. 运行主程序
4. 访问浏览器 `localhost:5973` 打开前端页面
5. 输入名称以打开日志, 程序会保存一份 `hjl` 文件 (`HamJsonLogs`)

## 填写注意

+ 模式仅允许搜索提示区列出的模式
+ 频率输入格式为 `%f/%f` , 前后两个小数, 中间斜杠隔开, 代表发射频率与频差. 如 `430.610/+9.0` , `438.5/+0.0`, `439.645/-9.0`

## 数据导出

当点击 "记录" 旁边的 "导出" 时, 您将打开一个新的页面. 您可以在这里导出您的记录.

1. 简单的 ADIF 文件
   + 仅包含如下字段
     1. CALL
     2. BAND
     3. MODE
     4. QSO_DATE
     5. TIME_ON
     6. FREQ
     7. BAND_RX
     8. FREQ_RX
2. 标准 csv (使用 `golang: encoding/csv` 库)
   + 可以自选要导出哪些信息
     1. 位号 - index
     2. 呼号 - callsign
     3. 日期时间 ( UTC ) - dt
     4. 频率 - band
     5. 模式 - mode
     6. 信号 - rst
     7. 对方设备 - rrig
     8. 对方功率 - rpwr
     9. 对方天线 - rant
     10. 对方台址 - rqth
     11. 己方设备 - trig
     12. 己方功率 - tpwr
     13. 己方天线 - tant
     14. 己方台址 - tqth
     15. 备注 - rmks
3. XLSX 文件 (使用 `golang: github.com/xuri/excelize/v2` 库)
   + 可以自选要导出哪些信息
     1. 位号 - index
     2. 呼号 - callsign
     3. 日期时间 ( UTC ) - dt
     4. 频率 - band
     5. 模式 - mode
     6. 信号 - rst
     7. 对方设备 - rrig
     8. 对方功率 - rpwr
     9. 对方天线 - rant
     10. 对方台址 - rqth
     11. 己方设备 - trig
     12. 己方功率 - tpwr
     13. 己方天线 - tant
     14. 己方台址 - tqth
     15. 备注 - rmks

## 模板数据说明

+ json格式, 须命名为 `tmpl.json` 且和可执行文件在同一目录下才可被加载

示例

```json
[
    {
        "callsign": "BG4QBF",
        "rig": "宝锋5RH",
        "pwr": "高",
        "ant": "老鹰770拉杆",
        "qth": "江苏镇江京口区"
    },
    {
        "callsign": "BG4QBF",
        "rig": "泉盛UV-K6",
        "pwr": "5W",
        "ant": "原装",
        "qth": "江苏南京紫金山头陀岭"
    }
]
```

## 字典数据说明

+ json格式, 须命名为 `dict.json` 且和可执行文件在同一目录下才可被加载

示例

```json
{
    "rig":{
        "bf": [
            "宝锋5RH",
            "宝锋UV5R",
            "宝锋UV5RMini",
            "宝锋UV32"
        ],
        "b5r": [
            "宝锋5RH",
            "宝锋UV5R",
            "宝锋UV5RMini"
        ],
        "b32": [
            "宝锋UV32"
        ]
    },
    "pwr":{
        "h": [
            "高"
        ],
        "m": [
            "中",
            "满"
        ],
        "max": [
            "满"
        ],
        "l": [
            "低"
        ]
    },
    "ant":{
        "2e": [
            "2单元八木"
        ],
        "3e": [
            "3单元八木",
            "3单元CJU"
        ]
    },
    "qth":{
        "xlw": [
            "江苏南京孝林卫"
        ],
        "yfq": [
            "江苏南京油坊桥"
        ],
        "yht": [
            "江苏南京雨花台"
        ],
        "cpu": [
            "江苏南京中国药科大学"
        ]
    }
}
```

## LICENSE

MIT
